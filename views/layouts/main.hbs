{{! /ESTA ES LA BASE DE NUESTRA PAGINA. ES LA PLANTILLA BASE DONDE SE VAN A RENDERIZAR TODAS LAS VISTAS QUE CREEMOS/ }}
<!DOCTYPE html>
<html lang='en'>

<head>
	<meta charset='UTF-8' />
	<meta name='viewport' content='width=device-width, initial-scale=1.0' />

	<!-- JQUERY	to BOOTSTRAP -->
	<script src="https://code.jquery.com/jquery-3.6.0.js"
		integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

	<!-- JavaScript Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
		crossorigin="anonymous"></script>

	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

	<link rel='stylesheet' href='/css/style.css' />
	<script src='/socket.io/socket.io.js' defer></script>
	<script type="text/javascript" src='/js/message.js' defer></script>
	<script type="text/javascript" src='/js/cart.js' defer></script>
	<script type="text/javascript" src='/js/session.js' defer></script>
	<title>Handlebars main page</title>
</head>

<body>

	{{{body}}}

	<script>
		function getIp (callback) {
			fetch('https://ipinfo.io/?callback=callback&token=26407d9e90e1f6', { headers: { 'Accept': 'application/json' } })
				.then((resp) => resp.json())
				.catch(() => {
					return {
						country: 'ar',
					};
				})
				.then((resp) => callback(resp.country));
		}


		const phoneInputField = document.querySelector("#phone");


		const phoneInput = window.intlTelInput(phoneInputField, {
			initialCountry: "auto",
			geoIpLookup: getIp,
			utilsScript:
				"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
		});

		const info = document.querySelector(".alert-info");
		const error = document.querySelector(".alert-error");
		const submitButto = document.querySelector('#btn-submit');
		const phone_number = document.querySelector('.input-phone');

		function process (event) {
			event.preventDefault();

			const phoneNumber = phoneInput.getNumber();

			info.style.display = "none";
			error.style.display = "none";

			if (phoneInput.isValidNumber()) {
				info.style.display = "";
				info.innerHTML = `Valid phone number &#9989`;
				submitButto.disabled = false;
				submitButto.style = '';
				phone_number.value = phoneNumber;
			} else {
				error.style.display = "";
				error.innerHTML = `Invalid phone number &#10060`;

			}
		}

	</script>
</body>
<footer>
	<br /><br />
</footer>

</html>